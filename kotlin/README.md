A kata to extract a stateful algorithm